---
os: Alma Linux
version: 8.6
tasks:
  -  name: install python 3
     command: sudo dnf install python39 python39-wheel python39-setuptools python39-pip -y
     description: Install Python 39
     version: 3.9

  - name: install git
    command: sudo dnf install git -y
    description: Install git
  
  - name: configure git user
    command: "git config --global user.name {{ username }}"
  
  - name: configure git email
    command: "git config --global user.email {{ email }}"

  - name: install gh
    command: 
      sudo dnf install 'dnf-command(config-manager)' -y
      sudo dnf config-manager --add-repo https://cli.github.com/packages/rpm/gh-cli.repo -y
      sudo dnf install gh -y
  
  - name: gh auth login
    command: "gh auth login --with-token {{ mytoken }}"

  - name: install vagrant
    command: 
      sudo yum install -y yum-utils
      sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
      sudo yum -y install vagrant
  
  - name: vagrant wsl hyper-v
    command:
      export VAGRANT_WSL_ENABLE_WINDOWS_ACCESS="1"
  
  - name: libvirtd
    command: 
      sudo dnf install qemu-kvm libvirt libvirt-python libguestfs-tools virt-install
      sudo systemctl enable libvirtd
      sudo systemctl start libvirtd


